<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8"/>
    <meta name="format-detection" content="telephone=no"/>
    <meta name="msapplication-tap-highlight" content="no"/>
    <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
    <meta name="viewport"    content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi"/>
    <link rel="stylesheet" type="text/css" href="css/index.css"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.4/jquery.mobile-1.4.4.min.css"/>
    <title>Hello World</title>
</head>
<body>
<div class="app">
    <h1>PhoneGap</h1>

    <div><input type='text' id="txtUrl" value="http://192.168.1.2/">
        <ul id="btnList" data-role="listview">
            <li><button onclick="app.register()">Register for Notifications</button></li>
            <li><button onclick="app.receiveStatus()">Remote Notification Status</button></li>
            <li><button onclick="app.getPending()">Get Pending Notifications</button></li>
            <li>
                <textarea id="log" readonly></textarea>
            </li>
        </ul>
    <div id="result"></div>
    <div id="deviceready" class="blink">
        <p class="event listening">Connecting to sss s s Device</p>

        <p class="event received">Device is ds Ready</p>
    </div>
</div>
<script type="text/javascript" src="cordova.js"></script>
<script type="text/javascript" src="PushNotification.js"></script>
<script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.4.4/jquery.mobile-1.4.4.min.js"></script>
<script type="text/javascript" src="js/user.js"></script>
<script type="text/javascript" src="js/index.js"></script>
<script type="text/javascript">
    app.initialize();
    $(function () {
        var baseUrl = $("#txtUrl").val();

        function addUser(d) {
            console.log(d);
            console.log('sdddd');
        }

        function oops(d) {
            $("#result").text(d);
        }

        var d = {userId:0, deviceId:'asdsd', deviceType:'desk'};
        $("#btnRequest").click(function () {
            $.ajax({url:baseUrl + 'Home/Register?callback_name=addUser',
                dataType:'jsonp', success:addUser, contentType:'application/json',
                type:'POST', jsonpCallback:'addUser', error:oops,
                data:d
            })
        });
        $("#btnRequest2").click(function () {


            $.ajax({url:baseUrl + 'Home/Register',
                dataType:'json', success:addUser, contentType:'application/json',
                type:'POST', error:oops,
                data:  JSON.stringify(d)
            })
        });
    })

</script>
</body>
</html>
