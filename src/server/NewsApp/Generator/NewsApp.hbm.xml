<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping assembly="NewsAppModel" namespace="NewsApp.Model" xmlns="urn:nhibernate-mapping-2.2">
  <class name="User" table="Users">
    <id name="UserId" type="Int32">
      <column name="UserId" not-null="true" />
      <generator class="identity" />
    </id>
    <property name="DeviceId" type="String">
      <column name="DeviceId" not-null="true" />
    </property>
    <property name="DeviceType" type="String">
      <column name="DeviceType" not-null="true" />
    </property>
    <property name="CreateDate" type="DateTime">
      <column name="CreateDate" not-null="true" />
    </property>
    <property name="LastModified" type="DateTime">
      <column name="LastModified" not-null="false" />
    </property>
    <bag name="UserNotifications" inverse="true" generic="true">
      <key>
        <column name="UserId" />
      </key>
      <one-to-many class="UserNotification" />
    </bag>
    <bag name="Churches" table="Users_Churches" inverse="true" generic="true">
      <key>
        <column name="UserId" />
      </key>
      <many-to-many class="Church" fetch="join">
        <column name="ChurchId" />
      </many-to-many>
    </bag>
  </class>
  <class name="Notification" table="Notifications">
    <id name="NotificationId" type="Int32">
      <column name="NotificationId" not-null="true" />
      <generator class="identity" />
    </id>
    <property name="Title" type="String">
      <column name="Title" not-null="true" />
    </property>
    <property name="Details" type="String">
      <column name="Details" not-null="true" />
    </property>
    <property name="CreateDate" type="DateTime">
      <column name="CreateDate" not-null="true" />
    </property>
    <property name="Type" type="Int32">
      <column name="Type" not-null="true" />
    </property>
    <many-to-one name="Chruch" class="Church">
      <column name="ChurchId" not-null="true" />
    </many-to-one>
    <bag name="UserNotification" inverse="true" generic="false">
      <key>
        <column name="NotificationId" />
      </key>
      <one-to-many class="UserNotification" />
    </bag>
  </class>
  <class name="UserNotification" table="UserNotifications">
    <id name="UserNotificationId" type="Int32">
      <column name="UserNotificationId" not-null="true" />
      <generator class="identity" />
    </id>
    <property name="LastSeen" type="DateTime">
      <column name="LastSeen" not-null="false" />
    </property>
    <property name="SendDate" type="DateTime">
      <column name="SendDate" not-null="false" />
    </property>
    <many-to-one name="User" class="User">
      <column name="UserId" not-null="true" />
    </many-to-one>
    <many-to-one name="Notification" class="Notification">
      <column name="NotificationId" not-null="true" />
    </many-to-one>
  </class>
  <class name="Church" table="Churches">
    <id name="ChurchId" type="Int32">
      <column name="ChurchId" not-null="true" />
      <generator class="identity" />
    </id>
    <property name="DisplayName" type="String">
      <column name="DisplayName" not-null="true" />
    </property>
    <property name="Address" type="String">
      <column name="Address" not-null="true" />
    </property>
    <property name="ZipCode" type="String">
      <column name="ZipCode" not-null="true" />
    </property>
    <property name="State" type="String">
      <column name="State" not-null="true" />
    </property>
    <property name="City" type="String">
      <column name="City" not-null="true" />
    </property>
    <property name="Country" type="String">
      <column name="Country" default="'US'" not-null="true" />
    </property>
    <property name="Latitude" type="Int64">
      <column name="Latitude" not-null="false" />
    </property>
    <property name="Longitude" type="Int64">
      <column name="Longitude" not-null="false" />
    </property>
    <bag name="Users" table="Users_Churches" generic="true">
      <key>
        <column name="ChurchId" not-null="true" />
      </key>
      <many-to-many class="User" fetch="join">
        <column name="UserId" not-null="true" />
      </many-to-many>
    </bag>
    <bag name="Notifications" inverse="true" generic="true">
      <key>
        <column name="ChurchId" />
      </key>
      <one-to-many class="Notification" />
    </bag>
  </class>
</hibernate-mapping>