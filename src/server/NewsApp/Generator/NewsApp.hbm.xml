<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping assembly="NewsAppModel" namespace="NewsApp.Model" xmlns="urn:nhibernate-mapping-2.2">
  <class name="User" table="Users">
    <id name="UserId" type="Int32">
      <column name="UserId" not-null="true" />
      <generator class="identity" />
    </id>
    <property name="Email" type="String">
      <column name="Email" not-null="false" />
    </property>
    <property name="CreateDate" type="DateTime">
      <column name="CreateDate" not-null="true" />
    </property>
    <property name="LastModified" type="DateTime">
      <column name="LastModified" not-null="false" />
    </property>
    <property name="Avatar" type="String">
      <column name="Avatar" not-null="false" />
    </property>
    <property name="Name" type="String">
      <column name="Name" not-null="false" />
    </property>
    <property name="BirthDay" type="Date">
      <column name="BirthDay" not-null="false" />
    </property>
    <many-to-one name="HomeChurch" class="Church">
      <column name="ChurchId" not-null="true" />
    </many-to-one>
    <bag name="Notifications" inverse="true" generic="true">
      <key>
        <column name="UserId" />
      </key>
      <one-to-many class="UserNotification" />
    </bag>
    <bag name="Churches" table="Users_Churches" inverse="true" generic="true">
      <key>
        <column name="UserId" />
      </key>
      <many-to-many class="Church" fetch="join">
        <column name="ChurchId" />
      </many-to-many>
    </bag>
    <bag name="Comments" inverse="true" generic="true">
      <key>
        <column name="UserId" />
      </key>
      <one-to-many class="Comment" />
    </bag>
    <bag name="CreatedNotifications" inverse="true" generic="true">
      <key>
        <column name="UserId" />
      </key>
      <one-to-many class="NewsFeed" />
    </bag>
    <bag name="Devices" inverse="true" cascade="all-delete-orphan" generic="true">
      <key>
        <column name="UserId" />
      </key>
      <one-to-many class="UserDevice" />
    </bag>
    <bag name="Subscriptions" table="Users_Subscriptions" inverse="true" generic="true">
      <key>
        <column name="UserId" />
      </key>
      <many-to-many class="ChurchSubscription" fetch="join">
        <column name="ChurchSubscriptionId" />
      </many-to-many>
    </bag>
    <bag name="Roles" inverse="true" generic="true">
      <key>
        <column name="UserId" />
      </key>
      <one-to-many class="UserRole" />
    </bag>
  </class>
  <class name="NewsFeed" table="NewsFeeds">
    <id name="NewsFeedId" type="Int32">
      <column name="NewsFeedId" not-null="true" />
      <generator class="identity" />
    </id>
    <property name="Body" type="String">
      <column name="Body" not-null="false" />
    </property>
    <property name="Title" type="String">
      <column name="Title" not-null="true" />
    </property>
    <property name="CreateDate" type="DateTime">
      <column name="CreateDate" not-null="true" />
    </property>
    <property name="SubscriptionType" type="Int32">
      <column name="SubscriptionType" not-null="false" />
    </property>
    <property name="Likes" type="Int32">
      <column name="Likes" not-null="true" />
    </property>
    <property name="Images" type="String">
      <column name="Images" not-null="true" />
    </property>
    <property name="ScheduleDate" type="DateTime">
      <column name="ScheduleDate" not-null="false" />
    </property>
    <property name="IsSent" type="Boolean">
      <column name="IsSent" not-null="true" />
    </property>
    <property name="NotifyUsers" type="Boolean">
      <column name="NotifyUsers" not-null="true" />
    </property>
    <many-to-one name="CreatedBy" class="User">
      <column name="UserId" not-null="true" />
    </many-to-one>
    <many-to-one name="Chruch" class="Church">
      <column name="ChurchId" not-null="true" />
    </many-to-one>
    <bag name="UserNotification" inverse="true" generic="false">
      <key>
        <column name="NewsFeedId" />
      </key>
      <one-to-many class="UserNotification" />
    </bag>
    <bag name="Comments" inverse="true" generic="true">
      <key>
        <column name="NewsFeedId" />
      </key>
      <one-to-many class="Comment" />
    </bag>
  </class>
  <class name="UserNotification" table="UserNotifications">
    <id name="UserNotificationId" type="Int32">
      <column name="UserNotificationId" not-null="true" />
      <generator class="identity" />
    </id>
    <property name="LastSeen" type="DateTime">
      <column name="LastSeen" not-null="false" />
    </property>
    <property name="SentDate" type="DateTime">
      <column name="SentDate" not-null="false" />
    </property>
    <many-to-one name="User" class="User">
      <column name="UserId" not-null="true" />
    </many-to-one>
    <many-to-one name="Notification" class="NewsFeed">
      <column name="NewsFeedId" not-null="true" />
    </many-to-one>
  </class>
  <class name="Church" table="Churches">
    <id name="ChurchId" type="Int32">
      <column name="ChurchId" not-null="true" />
      <generator class="identity" />
    </id>
    <property name="DisplayName" type="String">
      <column name="DisplayName" not-null="true" />
    </property>
    <property name="Address" type="String">
      <column name="Address" not-null="true" />
    </property>
    <property name="ZipCode" type="String">
      <column name="ZipCode" not-null="true" />
    </property>
    <property name="State" type="String">
      <column name="State" not-null="true" />
    </property>
    <property name="City" type="String">
      <column name="City" not-null="true" />
    </property>
    <property name="Country" type="String">
      <column name="Country" default="'US'" not-null="true" />
    </property>
    <property name="Latitude" type="Int64">
      <column name="Latitude" not-null="false" />
    </property>
    <property name="Longitude" type="Int64">
      <column name="Longitude" not-null="false" />
    </property>
    <property name="LiveStremUrl" type="String">
      <column name="LiveStremUrl" not-null="false" />
    </property>
    <bag name="Users" table="Users_Churches" generic="true">
      <key>
        <column name="ChurchId" not-null="true" />
      </key>
      <many-to-many class="User" fetch="join">
        <column name="UserId" not-null="true" />
      </many-to-many>
    </bag>
    <bag name="Notifications" inverse="true" generic="true">
      <key>
        <column name="ChurchId" />
      </key>
      <one-to-many class="NewsFeed" />
    </bag>
    <bag name="ChurchSubscriptions" inverse="true" generic="true">
      <key>
        <column name="ChurchId" />
      </key>
      <one-to-many class="ChurchSubscription" />
    </bag>
    <bag name="HomeUsers" inverse="true" generic="true">
      <key>
        <column name="ChurchId" />
      </key>
      <one-to-many class="User" />
    </bag>
  </class>
  <class name="Comment" table="Comments">
    <id name="CommentId" type="Int32">
      <column name="CommentId" not-null="true" />
      <generator class="identity" />
    </id>
    <property name="Body" type="String">
      <column name="Body" not-null="false" />
    </property>
    <property name="CreateDate" type="DateTime">
      <column name="CreateDate" not-null="true" />
    </property>
    <property name="Images" type="String">
      <column name="Images" not-null="false" />
    </property>
    <many-to-one name="User" class="User">
      <column name="UserId" not-null="true" />
    </many-to-one>
    <many-to-one name="NewsFeed" class="NewsFeed">
      <column name="NewsFeedId" not-null="true" />
    </many-to-one>
  </class>
  <class name="UserDevice" table="UserDevices">
    <id name="UserDeviceId" type="String">
      <column name="UserDeviceId" not-null="true" />
      <generator class="assigned" />
    </id>
    <property name="Type" type="String">
      <column name="Type" not-null="true" />
    </property>
    <property name="LastLogin" type="DateTime">
      <column name="LastLogin" not-null="true" />
    </property>
    <many-to-one name="User" class="User" cascade="all">
      <column name="UserId" not-null="true" />
    </many-to-one>
  </class>
  <class name="ChurchSubscription" table="ChurchSubscriptions">
    <id name="ChurchSubscriptionId" type="Int32">
      <column name="ChurchSubscriptionId" not-null="true" />
      <generator class="identity" />
    </id>
    <property name="Name" type="String">
      <column name="Name" not-null="true" />
    </property>
    <property name="IsEvent" type="Boolean">
      <column name="IsEvent" not-null="true" />
    </property>
    <many-to-one name="Church" class="Church">
      <column name="ChurchId" not-null="true" />
    </many-to-one>
    <bag name="Users" table="Users_Subscriptions" generic="true">
      <key>
        <column name="ChurchSubscriptionId" not-null="true" />
      </key>
      <many-to-many class="User" fetch="join">
        <column name="UserId" not-null="true" />
      </many-to-many>
    </bag>
  </class>
  <class name="UserRole" table="UserRoles">
    <id name="UserRoleId" type="Int32">
      <column name="UserRoleId" not-null="true" />
      <generator class="identity" />
    </id>
    <property name="CanPost" type="Boolean">
      <column name="CanPost" not-null="true" />
    </property>
    <many-to-one name="User" class="User">
      <column name="UserId" not-null="true" />
    </many-to-one>
  </class>
</hibernate-mapping>